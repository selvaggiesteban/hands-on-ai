# Commitlint Configuration
# Enforces conventional commit messages

extends:
  - "@commitlint/config-conventional"

rules:
  # Type enum - allowed commit types
  type-enum:
    - 2  # error level
    - always
    - - feat       # Nueva feature desde user story
      - fix        # Bug fix
      - docs       # Solo documentación
      - style      # Cambios de formato (no afectan código)
      - refactor   # Cambio sin nueva funcionalidad
      - perf       # Optimización de performance
      - test       # Tests
      - build      # Cambios al sistema de build
      - ci         # Cambios a CI/CD
      - chore      # Tareas de mantenimiento
      - revert     # Revert de commit anterior

  # Scope enum - auto-generados desde plan.json
  scope-enum:
    - 2
    - always
    - - auth          # Authentication/Authorization
      - api           # API endpoints
      - ui            # User interface
      - db            # Database
      - config        # Configuration
      - security      # Security
      - tests         # Testing
      - docs          # Documentation
      - devops        # DevOps/Infrastructure
      - deps          # Dependencies
      - agents        # AI Agents
      - rag           # RAG system
      - orchestrator  # Orchestration

  # Subject case - lowercase
  subject-case:
    - 2
    - always
    - "lower-case"

  # Subject min/max length
  subject-min-length:
    - 2
    - always
    - 10

  subject-max-length:
    - 2
    - always
    - 100

  # Body and footer
  body-max-line-length:
    - 2
    - always
    - 100

  footer-max-line-length:
    - 2
    - always
    - 100

# Custom prompt for interactive commits
prompt:
  questions:
    type:
      description: "Select the type of change that you're committing"
      enum:
        feat:
          description: "A new feature"
          title: "Features"
        fix:
          description: "A bug fix"
          title: "Bug Fixes"
        docs:
          description: "Documentation only changes"
          title: "Documentation"
        style:
          description: "Changes that do not affect the meaning of the code"
          title: "Styles"
        refactor:
          description: "A code change that neither fixes a bug nor adds a feature"
          title: "Code Refactoring"
        perf:
          description: "A code change that improves performance"
          title: "Performance Improvements"
        test:
          description: "Adding missing tests or correcting existing tests"
          title: "Tests"
        build:
          description: "Changes that affect the build system or external dependencies"
          title: "Builds"
        ci:
          description: "Changes to our CI configuration files and scripts"
          title: "Continuous Integrations"
        chore:
          description: "Other changes that don't modify src or test files"
          title: "Chores"
        revert:
          description: "Reverts a previous commit"
          title: "Reverts"

    scope:
      description: "What is the scope of this change (e.g. component or file name)"

    subject:
      description: "Write a short, imperative tense description of the change"

    body:
      description: "Provide a longer description of the change"

    isBreaking:
      description: "Are there any breaking changes?"

    breakingBody:
      description: "A BREAKING CHANGE commit requires a body. Please enter a longer description of the commit itself"

    breaking:
      description: "Describe the breaking changes"

    isIssueAffected:
      description: "Does this change affect any open issues?"

    issuesBody:
      description: "If issues are closed, the commit requires a body. Please enter a longer description of the commit itself"

    issues:
      description: "Add issue references (e.g. 'fix #123', 'rel #456')"
