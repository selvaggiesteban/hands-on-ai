{
  "title": "ARCHITECTURE AND DEVELOPMENT PLAN TEMPLATE - [PROJECT NAME]",
  "metadata": {
    "projectType": "[PROJECT TYPE / BRIEF DESCRIPTION]",
    "version": "1.0.1",
    "schema_version": "1.0",
    "date": "[DATE]",
    "techStack": "[MAIN TECH STACK]"
  },
  "tableOfContents": [
    "Executive Summary and Architectural Decisions",
    "Project Structure",
    "Complete Data Model",
    "Technical Implementation by Module",
    "Role-Based Access Control (RBAC) System",
    "External Integrations",
    "Development Phases and Roadmap",
    "Security Considerations",
    "Infrastructure and DevOps",
    "Validation Checklist",
    "Pending Decisions"
  ],
  "ai_optimization": {
    "context_strategy": "hierarchical",
    "description": "Use hierarchical context for large projects - start with overview, drill down to specifics",
    "max_tokens_per_feature": 2000,
    "rag_enabled": true,
    "vector_store": "chromadb",
    "embedding_model": "text-embedding-3-small",
    "cache_planning_documents": true,
    "token_budget_per_operation": {
      "planning": 10000,
      "code_generation": 8000,
      "review": 5000,
      "security_scan": 6000
    }
  },
  "security_policies": {
    "auth_strategy": "JWT",
    "token_expiry": "1h",
    "refresh_token_enabled": true,
    "data_classification": ["public", "internal", "confidential"],
    "compliance_requirements": ["GDPR", "OWASP-Top-10"],
    "secrets_management": "env",
    "encryption": {
      "data_at_rest": "AES-256",
      "data_in_transit": "TLS 1.3",
      "password_hashing": "bcrypt"
    },
    "security_headers": {
      "helmet_enabled": true,
      "cors_configuration": "restrictive",
      "csp_enabled": true
    },
    "input_validation": {
      "validator": "joi",
      "sanitization": "express-validator",
      "sql_injection_prevention": "parameterized_queries",
      "xss_prevention": "output_encoding"
    },
    "rate_limiting": {
      "enabled": true,
      "window_ms": 900000,
      "max_requests": 100
    },
    "audit_logging": {
      "enabled": true,
      "log_authentication": true,
      "log_authorization": true,
      "log_data_access": true
    }
  },
  "quality_gates": {
    "test_coverage_min": 80,
    "test_frameworks": {
      "unit": "jest",
      "integration": "supertest",
      "e2e": "playwright"
    },
    "lighthouse_score_min": 90,
    "performance_budgets": {
      "fcp": "1.8s",
      "lcp": "2.5s",
      "tti": "3.8s",
      "cls": "0.1"
    },
    "security_scan": {
      "tool": "snyk",
      "fail_on": "high",
      "scan_dependencies": true,
      "scan_code": true
    },
    "code_quality": {
      "tool": "sonarqube",
      "quality_gate": "default",
      "min_rating": "A",
      "max_technical_debt": "5d"
    },
    "pre_commit_hooks": ["eslint", "prettier", "test", "type-check"],
    "required_checks": {
      "build": true,
      "tests": true,
      "linting": true,
      "security_scan": true,
      "code_review": true
    },
    "deployment_gates": {
      "staging": ["all_tests_pass", "security_scan_pass", "code_review_approved"],
      "production": ["staging_validated", "manual_approval", "rollback_plan"]
    }
  },
  "sections": {
    "executiveSummaryAndArchitecturalDecisions": {
      "title": "1. EXECUTIVE SUMMARY AND ARCHITECTURAL DECISIONS",
      "projectOverview": {
        "title": "1.1 Project Overview",
        "description": "[PROJECT NAME] is a [SYSTEM TYPE, e.g., SaaS, Mobile App, Web Platform] designed for [PROJECT'S MAIN GOAL].",
        "features": [
          { "feature": "[Key Feature A]", "description": "[Description of Feature A]." },
          { "feature": "[Key Feature B]", "description": "[Description of Feature B]." },
          { "feature": "[Key Feature C]", "description": "[Description of Feature C]." },
          { "feature": "[Key Feature D]", "description": "[Description of Feature D]." },
          { "feature": "[Key Feature E]", "description": "[Description of Feature E]." },
          { "feature": "[Key Feature F]", "description": "[Description of Feature F]." }
        ]
      },
      "fundamentalArchitecturalDecisions": {
        "title": "1.2 Fundamental Architectural Decisions",
        "mainTechnologyStack": {
          "title": "A. Main Technology Stack",
          "description": "[Detail the chosen tech stack here: language, framework, database, etc.]"
        },
        "architecturalDecisionRecords": {
          "title": "B. Architectural Decision Records (ADRs)",
          "description": "Key architectural decisions for this project are documented as Architectural Decision Records (ADRs) in the `/docs/adr` directory. Refer to ADR-001, ADR-002, etc., for detailed context, decisions, and consequences. (ADR template now includes a 'Scope' section for machine readability.)"
        }
      }
    },
    "completeDataModel": {
      "title": "3. COMPLETE DATA MODEL",
      "entityRelationshipDiagram": {
        "title": "3.1 Entity-Relationship Diagram",
        "mermaidSyntax": "erDiagram\n    ENTITY_A ||--o{ ENTITY_B : \"has\"\n    ENTITY_B ||--|{ ENTITY_C : \"contains\"\n    ENTITY_A {\n        UUID id PK \"NOT NULL UNIQUE\"\n        string name \"NOT NULL\"\n        text description \"NULL\"\n        timestamp created_at \"NOT NULL\"\n        timestamp updated_at \"NOT NULL\"\n    }\n    ENTITY_B {\n        UUID id PK \"NOT NULL UNIQUE\"\n        string title \"NOT NULL\"\n        UUID entity_a_id FK \"NOT NULL\"\n        boolean is_active \"DEFAULT TRUE\"\n        timestamp created_at \"NOT NULL\"\n        timestamp updated_at \"NOT NULL\"\n    }\n    ENTITY_C {\n        UUID id PK \"NOT NULL UNIQUE\"\n        string detail \"NOT NULL\"\n        UUID entity_b_id FK \"NOT NULL\"\n        timestamp created_at \"NOT NULL\"\n        timestamp updated_at \"NOT NULL\"\n    }",
        "note": "[Replace the example above with your project's actual ER diagram. Use Markdown preview or GitHub to render.]"
      },
      "mainTables": {
        "title": "3.2 Main Tables with Detailed Fields",
        "modules": [
          {
            "name": "[Module Name 1, e.g., User Management] Module",
            "tables": [
              { "name": "table_1", "description": "[Fields and description]." },
              { "name": "table_2", "description": "[Fields and description]." }
            ]
          },
          {
            "name": "[Module Name 2, e.g., Content] Module",
            "tables": [
              { "name": "table_3", "description": "[Fields and description]." },
              { "name": "table_4", "description": "[Fields and description]." }
            ]
          }
        ]
      }
    },
    "technicalImplementationByModule": {
      "title": "4. TECHNICAL IMPLEMENTATION BY MODULE (SUMMARY)",
      "modules": [
        {
          "name": "Administration Module",
          "features": [
            { "feature": "[Admin Feature A]", "implementation": "[Brief description of technical implementation]." },
            { "feature": "[Admin Feature B]", "implementation": "[Brief description of technical implementation]." }
          ]
        },
        {
          "name": "End User Module",
          "features": [
            { "feature": "[User Feature A]", "implementation": "[Brief description of technical implementation]." },
            { "feature": "[User Feature B]", "implementation": "[Brief description of technical implementation]." }
          ]
        }
      ],
      "apiEndpoints": {
        "title": "4.3 API Endpoints (Per Module)",
        "note": "[Define key API endpoints for each module, specifying HTTP method, path, and expected parameters. This enables automated routing and basic API client generation.]",
        "modules": [
          {
            "name": "[Module Name, e.g., User Module]",
            "endpoints": [
              {
                "method": "POST",
                "path": "/api/[module-plural]",
                "description": "Create Entity",
                "requestBody": "{ \"field1\": \"type\", \"field2\": \"type\" }",
                "response": "201 Created"
              },
              {
                "method": "GET",
                "path": "/api/[module-plural]/{id}",
                "description": "Get Single Entity",
                "response": "200 OK, { \"id\": \"uuid\", ... }"
              },
              {
                "method": "PUT",
                "path": "/api/[module-plural]/{id}",
                "description": "Update Entity",
                "requestBody": "{ \"field1\": \"new_value\" }",
                "response": "200 OK"
              },
              {
                "method": "DELETE",
                "path": "/api/[module-plural]/{id}",
                "description": "Delete Entity",
                "response": "204 No Content"
              }
            ]
          }
        ]
      }
    },
    "pendingDecisions": {
      "title": "11. PENDING DECISIONS (Awaiting Confirmation)",
      "description": "To finalize the project scope, the following points need clarification:",
      "topics": [
        {
          "topic": "[Topic A]",
          "questions": [
            "[Specific question 1 about Topic A].",
            "[Specific question 2 about Topic A]."
          ]
        },
        {
          "topic": "[Topic B]",
          "questions": [
            "[Specific question 1 about Topic B]."
          ]
        },
        {
          "topic": "[Topic C]",
          "questions": [
            "[Specific question 1 about Topic C].",
            "[Specific question 2 about Topic C]."
          ]
        }
      ]
    }
  }
}
